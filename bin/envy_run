#!/usr/bin/env ruby

argv = ARGV.dup

if argv.shift != 'fwd'
  STDERR.puts <<~ERR
    envy_build needs to be called from envy
    if you don't have the command 'envy', run 'envy-install'
  ERR
  exit 1
end

$LOAD_PATH.unshift File.expand_path("../lib", __dir__) # For use/testing when no gem is installed
require "envy"

# extensions

begin
  sys = Envy::HostSystem
  runner = Envy::Runner.new(sys)
  runner.do_run(argv)
  puts runner.output
rescue Envy::Error => e
  STDERR.puts e.message
  exit 1
end
